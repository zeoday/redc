<p align="center">
  <a href="https://github.com/wgpsec/redc">
    <img src="./img/banner.jpg" width="100%" alt="redc">
  </a>
  <p align="center">
    çº¢é˜ŸåŸºç¡€è®¾æ–½å¤šäº‘è‡ªåŠ¨åŒ–éƒ¨ç½²å·¥å…·
    <br />
    <br />
<a href="https://github.com/wgpsec/redc/stargazers"><img alt="GitHub stars" src="https://img.shields.io/github/stars/wgpsec/redc"/></a>
<a href="https://github.com/wgpsec/redc/releases"><img alt="GitHub releases" src="https://img.shields.io/github/release/wgpsec/redc"/></a>
<a href="https://github.com/wgpsec/redc/blob/main/LICENSE"><img alt="License" src="https://img.shields.io/badge/License-Apache%202.0-blue.svg"/></a>
<a href="https://github.com/wgpsec/redc/releases"><img alt="Downloads" src="https://img.shields.io/github/downloads/wgpsec/redc/total?color=brightgreen"/></a>
<a href="https://goreportcard.com/report/github.com/wgpsec/redc"><img alt="Go Report Card" src="https://goreportcard.com/badge/github.com/wgpsec/redc"/></a>
<a href="https://twitter.com/wgpsec"><img alt="Twitter" src="https://img.shields.io/twitter/follow/wgpsec?label=Followers&style=social" /></a>
<br>
<br>
<a href="https://redc.wgpsec.org/"><strong>æ¢ç´¢æ›´å¤šæ¨¡æ¿ Â»</strong></a>
    <br/>
    <br />
      <a href="https://github.com/wgpsec/redc?tab=readme-ov-file#%E4%BD%BF%E7%94%A8%E6%8C%87%E5%8D%97">ğŸ§å¦‚ä½•ä½¿ç”¨</a>
      Â·
    <a href="https://github.com/wgpsec/redc/releases">â¬‡ï¸ä¸‹è½½ç¨‹åº</a>
    Â·
    <a href="https://github.com/wgpsec/redc/issues">â”åé¦ˆBug</a>
    Â·
    <a href="https://github.com/wgpsec/redc/discussions">ğŸ­æäº¤éœ€æ±‚</a>
  </p>

ä¸­æ–‡ | [English](README.md)

---

## æ–‡æ¡£

- **[ä½¿ç”¨æŒ‡å—](README_CN.md)** - å®Œæ•´çš„å®‰è£…å’Œä½¿ç”¨æŒ‡å—
- **[AI è¿ç»´ Skills](.claude/skills/useage/SKILL_CN.md)** - AI ä»£ç†å’Œè‡ªåŠ¨åŒ–å·¥å…·çš„ç»¼åˆæŒ‡å—
- **[MCP åè®®æ”¯æŒ](doc/MCP_CN.md)** - AI åŠ©æ‰‹çš„æ¨¡å‹ä¸Šä¸‹æ–‡åè®®é›†æˆ
- **[Compose ç¼–æ’æŒ‡å—](doc/Compose_CN.md)** - å¤šæœåŠ¡ç¼–æ’éƒ¨ç½²æœ€ä½³å®è·µ
- **[æ¨¡æ¿ä»“åº“](https://github.com/wgpsec/redc-template)** - é¢„é…ç½®çš„åŸºç¡€è®¾æ–½æ¨¡æ¿
- **[åœ¨çº¿æ¨¡æ¿](https://redc.wgpsec.org/)** - æµè§ˆå’Œä¸‹è½½æ¨¡æ¿

---

Redc åŸºäº Terraform å°è£…ï¼Œå°†çº¢é˜ŸåŸºç¡€è®¾æ–½çš„å®Œæ•´ç”Ÿå‘½å‘¨æœŸï¼ˆåˆ›å»ºã€é…ç½®ã€é”€æ¯ï¼‰è¿›ä¸€æ­¥ç®€åŒ–ã€‚

Redc ä¸ä»…ä»…æ˜¯å¼€æœºå·¥å…·ï¼Œæ›´æ˜¯å¯¹äº‘èµ„æºçš„è‡ªåŠ¨åŒ–è°ƒåº¦å™¨ï¼

- **ä¸€æ¡å‘½ä»¤äº¤ä»˜**ï¼Œä»è´­ä¹°æœºå™¨åˆ°æœåŠ¡è·‘èµ·æ¥ä¸€æ¡é¾™ï¼Œæ— éœ€äººå·¥å¹²é¢„
- **å¤šäº‘éƒ¨ç½²æ”¯æŒ**ï¼Œé€‚é…é˜¿é‡Œäº‘ã€è…¾è®¯äº‘ã€AWS ç­‰ä¸»æµäº‘å‚å•†
- **åœºæ™¯é¢„åˆ¶å°è£…**ï¼Œçº¢é˜Ÿç¯å¢ƒ â€é¢„åˆ¶èœâ€œï¼Œå†ä¹Ÿä¸ç”¨åˆ°å¤„æ‰¾èµ„æº
- **çŠ¶æ€èµ„æºç®¡ç†**ï¼Œæœ¬åœ°ä¿å­˜èµ„æºçŠ¶æ€ï¼Œéšæ—¶é”€æ¯ç¯å¢ƒï¼Œæœç»èµ„æºè´¹ç”¨æµªè´¹

---

## GUI å¼€å‘ä¸è°ƒè¯•

redc GUI åŸºäº Wails + Svelte + Viteã€‚

![gui](./img/gui.png)

### å¼€å‘ç¯å¢ƒå‡†å¤‡

1. å®‰è£… Goï¼ˆå»ºè®® 1.21+ï¼‰
2. å®‰è£… Node.jsï¼ˆå»ºè®® 18+ï¼‰
3. å®‰è£… Wails CLI

```bash
go install github.com/wailsapp/wails/v2/cmd/wails@latest
```

### å¯åŠ¨å¼€å‘è°ƒè¯•

åœ¨é¡¹ç›®æ ¹ç›®å½•æ‰§è¡Œï¼š

```bash
wails dev
```

å¸¸è§é—®é¢˜æ’æŸ¥ï¼š

- å‰ç«¯ä¾èµ–æœªå®‰è£…ï¼šåœ¨ [frontend/](frontend/) ç›®å½•æ‰§è¡Œ `npm install`
- å‰ç«¯çƒ­æ›´æ–°å¼‚å¸¸ï¼šå°è¯•åˆ é™¤ [frontend/node_modules](frontend/node_modules) åé‡æ–°å®‰è£…

---

## GUI ç¼–è¯‘ä¸å‘å¸ƒ

åœ¨é¡¹ç›®æ ¹ç›®å½•æ‰§è¡Œï¼š

```bash
wails build

# windows
wails build -platform windows/amd64
```

æ„å»ºäº§ç‰©è¾“å‡ºåˆ° [build/bin](build/bin)ã€‚

å¦‚éœ€æŒ‡å®šå¹³å°æˆ–æ¶æ„ï¼Œå¯å‚è€ƒ Wails å®˜æ–¹æ–‡æ¡£ï¼š
https://wails.io/docs/guides/building/

---

## CLI å®‰è£…é…ç½®

### redc å¼•æ“å®‰è£… (ç¬¬ä¸€æ­¥)
#### ä¸‹è½½äºŒè¿›åˆ¶åŒ…

REDC ä¸‹è½½åœ°å€ï¼šhttps://github.com/wgpsec/redc/releases

ä¸‹è½½ç³»ç»Ÿå¯¹åº”çš„å‹ç¼©æ–‡ä»¶ï¼Œè§£å‹ååœ¨å‘½ä»¤è¡Œä¸­è¿è¡Œå³å¯ã€‚

#### HomeBrew å®‰è£… ï¼ˆWIPï¼‰

**å®‰è£…**

```bash
brew install wgpsec/tap/redc
```

**æ›´æ–°**

```bash
brew update
brew upgrade redc
```

#### ä»æºç ç¼–è¯‘å®‰è£…

**goreleaser**
```bash
git clone https://github.com/wgpsec/redc.git
cd redc
goreleaser --snapshot --clean

# ç¼–è¯‘æˆåŠŸåä¼šåœ¨ dist è·¯å¾„ä¸‹
```

### æ¨¡ç‰ˆé€‰æ‹© (ç¬¬äºŒæ­¥)

é»˜è®¤ä¸‹ redc ä¼šè¯»å–ç”¨æˆ·ç›®å½•ä¸‹çš„ ~/redc/redc-templates æ¨¡æ¿æ–‡ä»¶å¤¹ï¼Œå¯¹åº”çš„ "æ–‡ä»¶å¤¹åç§°" å°±æ˜¯éƒ¨ç½²æ—¶çš„åœºæ™¯åç§°

å¯ä»¥è‡ªè¡Œä¸‹è½½æ¨¡æ¿åœºæ™¯ï¼Œåœºæ™¯åç§°å¯¹åº”æ¨¡æ¿ä»“åº“ https://github.com/wgpsec/redc-template

åœ¨çº¿åœ°å€ï¼šhttps://redc.wgpsec.org/

ä¾‹å¦‚ï¼Œä¸€é”®æ‹‰å–ecsåœºæ™¯
```bash
redc pull aliyun/ecs

# æ­¤æ—¶ï¼Œæ¨¡æ¿ä¼šä¸‹è½½åˆ° ~/redc/redc-templates ç›®å½•ä¸‹
```

![redc pull](./img/image9.png)

æ¯ä¸ªåœºæ™¯çš„å…·ä½“ä½¿ç”¨å’Œå‘½ä»¤è¯·æŸ¥çœ‹æ¨¡æ¿ä»“åº“ https://github.com/wgpsec/redc-template é‡Œå…·ä½“åœºæ™¯çš„ readme

### å¼•æ“é…ç½®æ–‡ä»¶ (ç¬¬ä¸‰æ­¥)

redc å¼€å¯æœºå™¨éœ€è¦ä¾é  aksk

é»˜è®¤ä¸‹ redc ä¼šè¯»å–ç”¨æˆ·è·¯å¾„çš„ config.yaml é…ç½®æ–‡ä»¶ï¼Œæ ¼å¼å¦‚ä¸‹
```
vim ~/redc/config.yaml
```

```yaml
# å¤šäº‘èº«ä»½å‡­è¯ä¸é»˜è®¤åŒºåŸŸ
providers:
  aws:
    AWS_ACCESS_KEY_ID: "AKIDXXXXXXXXXXXXXXXX"
    AWS_SECRET_ACCESS_KEY: "WWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWW"
    region: "us-east-1"
  aliyun:
    ALICLOUD_ACCESS_KEY: "AKIDXXXXXXXXXXXXXXXX"
    ALICLOUD_SECRET_KEY: "WWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWW"
    region: "cn-hangzhou"
  tencentcloud:
    TENCENTCLOUD_SECRET_ID: "AKIDXXXXXXXXXXXXXXXX"
    TENCENTCLOUD_SECRET_KEY: "WWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWW"
    region: "ap-guangzhou"
  volcengine:
    VOLCENGINE_ACCESS_KEY: "AKIDXXXXXXXXXXXXXXXX"
    VOLCENGINE_SECRET_KEY: "WWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWW"
    region: "cn-beijing"
  huaweicloud:
    HUAWEICLOUD_ACCESS_KEY: "AKIDXXXXXXXXXXXXXXXX"
    HUAWEICLOUD_SECRET_KEY: "WWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWW"
    region: "cn-north-4"
  google:
    GOOGLE_CREDENTIALS: '{"type":"service_account","project_id":"your-project",...}'
    project: "your-project-id"
    region: "us-central1"
  azure:
    ARM_CLIENT_ID: "00000000-0000-0000-0000-000000000000"
    ARM_CLIENT_SECRET: "your-client-secret"
    ARM_SUBSCRIPTION_ID: "00000000-0000-0000-0000-000000000000"
    ARM_TENANT_ID: "00000000-0000-0000-0000-000000000000"
  oracle:
    OCI_CLI_USER: "ocid1.user.oc1..aaaaaaa..."
    OCI_CLI_TENANCY: "ocid1.tenancy.oc1..aaaaaaa..."
    OCI_CLI_FINGERPRINT: "aa:bb:cc:dd:ee:ff:00:11:22:33:44:55:66:77:88:99"
    OCI_CLI_KEY_FILE: "~/.oci/oci_api_key.pem"
    OCI_CLI_REGION: "us-ashburn-1"
  cloudflare:
    CF_EMAIL: "you@example.com"
    CF_API_KEY: "your-cloudflare-api-key"
```

åœ¨é…ç½®æ–‡ä»¶åŠ è½½å¤±è´¥çš„æƒ…å†µä¸‹ï¼Œä¼šå°è¯•è¯»å–ç³»ç»Ÿç¯å¢ƒå˜é‡ï¼Œä½¿ç”¨å‰è¯·é…ç½®å¥½

**AWS ç¯å¢ƒå˜é‡**
- è¯¦æƒ…å‚è€ƒ : https://docs.aws.amazon.com/sdkref/latest/guide/feature-static-credentials.html

Linux/macOS ç¤ºä¾‹é€šè¿‡å‘½ä»¤è¡Œè®¾ç½®ç¯å¢ƒå˜é‡ï¼š
```bash
export AWS_ACCESS_KEY_ID=AKIAIOSFODNN7EXAMPLE
export AWS_SECRET_ACCESS_KEY=wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY
```

Windows ç¤ºä¾‹é€šè¿‡å‘½ä»¤è¡Œè®¾ç½®ç¯å¢ƒå˜é‡ï¼š
```powershell
setx AWS_ACCESS_KEY_ID AKIAIOSFODNN7EXAMPLE
setx AWS_SECRET_ACCESS_KEY wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY
```

**é˜¿é‡Œäº‘ç¯å¢ƒå˜é‡**
- è¯¦æƒ…å‚è€ƒ : https://help.aliyun.com/zh/terraform/terraform-authentication

Linux/macOS ç³»ç»Ÿ
> ä½¿ç”¨ export å‘½ä»¤é…ç½®çš„ä¸´æ—¶ç¯å¢ƒå˜é‡ä»…å¯¹å½“å‰ Shell ä¼šè¯æœ‰æ•ˆã€‚å¦‚éœ€é•¿æœŸä¿ç•™ï¼Œå¯å°† export å‘½ä»¤å†™å…¥ Shell çš„å¯åŠ¨é…ç½®æ–‡ä»¶ï¼ˆå¦‚ .bash_profile æˆ– .zshrcï¼‰ã€‚
```
# AccessKey ID
$ export ALICLOUD_ACCESS_KEY="<AccessKey ID>"
# AccessKey Secret
$ export ALICLOUD_SECRET_KEY="<AccessKey Secret>"
# å¦‚æœä½¿ç”¨ STS å‡­è¯ï¼Œéœ€é…ç½® security_token
$ export ALICLOUD_SECURITY_TOKEN="<STS Token>"
```

Windows ç³»ç»Ÿ
```
åœ¨æ¡Œé¢å³é”®å•å‡» æ­¤ç”µè„‘ï¼Œé€‰æ‹© å±æ€§ > é«˜çº§ç³»ç»Ÿè®¾ç½® > ç¯å¢ƒå˜é‡ã€‚
åœ¨ ç³»ç»Ÿå˜é‡ æˆ– ç”¨æˆ·å˜é‡ ä¸­ï¼Œå•å‡» æ–°å»ºï¼Œåˆ›å»ºä»¥ä¸‹ç¯å¢ƒå˜é‡ï¼šALICLOUD_ACCESS_KEYã€ALICLOUD_SECRET_KEYã€ALICLOUD_SECURITY_TOKENï¼ˆå¯é€‰ï¼‰ã€‚
```

**è…¾è®¯äº‘ç¯å¢ƒå˜é‡**
- è¯¦æƒ…å‚è€ƒ : https://cloud.tencent.com/document/product/1278/85305

Linux/macOS ç³»ç»Ÿ
```
export TENCENTCLOUD_SECRET_ID=æ‚¨çš„SecretId
export TENCENTCLOUD_SECRET_KEY=æ‚¨çš„SecretKey
```

Windows ç³»ç»Ÿ
```
set TENCENTCLOUD_SECRET_ID=æ‚¨çš„SecretId
set TENCENTCLOUD_SECRET_KEY=æ‚¨çš„SecretKey
```

**ç«å±±å¼•æ“ç¯å¢ƒå˜é‡**
- è¯¦æƒ…å‚è€ƒ : https://www.volcengine.com/docs/6291/65568

Linux/macOS ç³»ç»Ÿ
```
export VOLCENGINE_ACCESS_KEY=æ‚¨çš„AccessKey
export VOLCENGINE_SECRET_KEY=æ‚¨çš„SecretKey
```

Windows ç³»ç»Ÿ
```
set VOLCENGINE_ACCESS_KEY=æ‚¨çš„AccessKey
set VOLCENGINE_SECRET_KEY=æ‚¨çš„SecretKey
```

---

## å¿«é€Ÿä¸Šæ‰‹

redcè®¾è®¡ä¸ºdocker likeå‘½ä»¤è®¾è®¡

ä½¿ç”¨ `redc -h` å¯ä»¥æŸ¥çœ‹å¸¸ç”¨å‘½ä»¤å¸®åŠ©

**åˆå§‹åŒ–æ¨¡ç‰ˆ**

é¦–æ¬¡ä½¿ç”¨æ¨¡ç‰ˆéœ€è¦è¿è¡Œã€‚ä¸ºäº†åŠ å¿«æ¨¡ç‰ˆéƒ¨ç½²é€Ÿåº¦ï¼Œå»ºè®®è¿è¡Œ init é€‰é¡¹åŠ å¿«åç»­éƒ¨ç½²é€Ÿåº¦

````bash
redc init
````

![é»˜è®¤initæ•ˆæœ](./img/image.png)

é»˜è®¤ä¼š init åœ¨ ~/redc/redc-templates è·¯å¾„ä¸‹çš„æ‰€æœ‰åœºæ™¯ï¼Œä½œç”¨å°±æ˜¯åˆ·ä¸€é tf provider çš„ cache

**åˆ—å‡ºæ¨¡ç‰ˆåˆ—è¡¨**

```bash
redc image ls
```

é»˜è®¤ä¼šåˆ—å‡ºåœ¨ ~/redc/redc-templates è·¯å¾„ä¸‹çš„æ‰€æœ‰åœºæ™¯

![redc image ls](./img/image10.png)

**åˆ›å»ºå®ä¾‹å¹¶å¯åŠ¨**

ecs ä¸ºæ¨¡ç‰ˆæ–‡ä»¶åç§°

````bash
redc plan --name boring_sheep_ecs  [æ¨¡ç‰ˆåç§°] # è§„åˆ’ä¸€ä¸ªå®ä¾‹ï¼ˆè¯¥è¿‡ç¨‹éªŒè¯é…ç½®ä½†ä¸ä¼šåˆ›å»ºåŸºç¡€è®¾æ–½ï¼‰
# planå®Œæˆåä¼šè¿”å›caseid å¯ä½¿ç”¨startå‘½ä»¤å®é™…åˆ›å»ºåŸºç¡€è®¾æ–½
redc start [caseid]
redc start [casename]
````

ä¹Ÿå¯ä»¥ç›´æ¥å¯åŠ¨æ¨¡ç‰ˆ

```bash
redc run aliyun/ecs
```

![redc run aliyun/ecs](./img/image11.png)

> å¼€å¯åä¼šç»™å‡º case id ï¼Œè¿™æ˜¯æ ‡è¯†åœºæ™¯å”¯ä¸€æ€§çš„è¯†åˆ« idï¼Œåç»­æ“ä½œéƒ½éœ€è¦ç”¨åˆ° case id
> ä¾‹å¦‚ 8a57078ee8567cf2459a0358bc27e534cb87c8a02eadc637ce8335046c16cb3c å¯ä»¥ç”¨ 8a57078ee856 æ•ˆæœä¸€æ ·

ä½¿ç”¨`-e` å‚æ•°å¯é…ç½®å˜é‡

```
redc run -e xxx=xxx ecs
```

åœæ­¢å®ä¾‹

````bash
redc stop [caseid] # åœæ­¢å®ä¾‹
redc rm [caseid] # åˆ é™¤å®ä¾‹ï¼ˆåˆ é™¤å‰ç¡®è®¤å®ä¾‹æ˜¯å¦å·²ç»åœæ­¢ï¼‰
redc kill [caseid] # initæ¨¡ç‰ˆååœæ­¢å®ä¾‹å¹¶åˆ é™¤
````

![redc stop [caseid]](./img/image7.png)

**æŸ¥çœ‹caseæƒ…å†µ**

````
redc ps
````

![redc ps](./img/image8.png)

**æ‰§è¡Œå‘½ä»¤**

ç›´æ¥æ‰§è¡Œå‘½ä»¤å¹¶è¿”å›ç»“æœ

````
redc exec [caseid] whoami
````

![redc exec [caseid] whoami](./img/image3.png)

è¿›å…¥äº¤äº’å¼å‘½ä»¤

````
redc exec -t [caseid] bash
````

![redc exec -t [caseid] bash](./img/image4.png)

å¤åˆ¶æ–‡ä»¶åˆ°æœåŠ¡å™¨

```
redc cp test.txt [caseid]:/root/
```

![redc cp test.txt [caseid]:/root/](./img/image5.png)

ä¸‹è½½æ–‡ä»¶åˆ°æœ¬åœ°

```
redc cp [caseid]:/root/test.txt ./
```

![redc cp [caseid]:/root/test.txt ./](./img/image6.png)

**æ›´æ”¹æœåŠ¡**

è¿™ä¸ªéœ€è¦æ¨¡ç‰ˆæ”¯æŒæ›´æ”¹ï¼Œå¯å®ç°æ›´æ¢å¼¹æ€§å…¬ç½‘ip

````
redc change [caseid]
````

## MCPï¼ˆæ¨¡å‹ä¸Šä¸‹æ–‡åè®®ï¼‰æ”¯æŒ

redc ç°å·²æ”¯æŒæ¨¡å‹ä¸Šä¸‹æ–‡åè®®ï¼Œå¯ä¸ AI åŠ©æ‰‹å’Œè‡ªåŠ¨åŒ–å·¥å…·æ— ç¼é›†æˆã€‚

### ä¸»è¦ç‰¹æ€§

- **ä¸¤ç§ä¼ è¾“æ¨¡å¼**ï¼šSTDIO ç”¨äºæœ¬åœ°é›†æˆï¼ŒSSE ç”¨äºåŸºäº Web çš„è®¿é—®
- **å…¨é¢çš„å·¥å…·**ï¼šåˆ›å»ºã€ç®¡ç†å’Œåœ¨åŸºç¡€è®¾æ–½ä¸Šæ‰§è¡Œå‘½ä»¤
- **AI å‹å¥½**ï¼šæ”¯æŒ Claude Desktopã€è‡ªå®šä¹‰ AI å·¥å…·å’Œè‡ªåŠ¨åŒ–å¹³å°
- **å®‰å…¨æ€§**ï¼šSTDIO åœ¨æœ¬åœ°è¿è¡Œæ— ç½‘ç»œæš´éœ²ï¼›SSE å¯é™åˆ¶ä¸º localhost

### å¿«é€Ÿå¼€å§‹

**å¯åŠ¨ STDIO æœåŠ¡å™¨**ï¼ˆç”¨äº Claude Desktop é›†æˆï¼‰ï¼š
```bash
redc mcp stdio
```

**å¯åŠ¨ SSE æœåŠ¡å™¨**ï¼ˆç”¨äºåŸºäº Web çš„å®¢æˆ·ç«¯ï¼‰ï¼š
```bash
# é»˜è®¤ï¼ˆlocalhost:8080ï¼‰
redc mcp sse

# è‡ªå®šä¹‰ç«¯å£
redc mcp sse localhost:9000
```

### å¯ç”¨å·¥å…·

- `list_templates` - åˆ—å‡ºæ‰€æœ‰å¯ç”¨æ¨¡æ¿
- `list_cases` - åˆ—å‡ºé¡¹ç›®ä¸­çš„æ‰€æœ‰åœºæ™¯
- `plan_case` - ä»æ¨¡æ¿è§„åˆ’æ–°åœºæ™¯ï¼ˆé¢„è§ˆèµ„æºè€Œä¸å®é™…åˆ›å»ºï¼‰
- `start_case` / `stop_case` / `kill_case` - ç®¡ç†åœºæ™¯ç”Ÿå‘½å‘¨æœŸ
- `get_case_status` - æ£€æŸ¥åœºæ™¯çŠ¶æ€
- `exec_command` - åœ¨åœºæ™¯ä¸Šæ‰§è¡Œå‘½ä»¤

### ç¤ºä¾‹ï¼šä¸ Chrerry stdio é›†æˆ

ä»¥Chrerry stdioä¸ºä¾‹ å¡«å…¥ http://localhost:9000/sse å³å¯è·å¾—åˆ°å·¥å…·ä¿¡æ¯

![mcp](./img/image12.png)

ä½¿ç”¨ç¤ºä¾‹
- æµ‹è¯•

  ![æµ‹è¯•](./img/image13.png)

- å¼€å¯æœºå™¨

  ![å¼€å¯æœºå™¨](./img/image14.png)

- æ‰§è¡Œå‘½ä»¤

  ![æ‰§è¡Œå‘½ä»¤](./img/image15.png)

- å…³é—­æœºå™¨

  ![å…³é—­æœºå™¨](./img/image16.png)

### ç¤ºä¾‹ï¼šä¸ Claude Desktop é›†æˆ

æ·»åŠ åˆ° `~/Library/Application Support/Claude/claude_desktop_config.json`ï¼š
```json
{
  "mcpServers": {
    "redc": {
      "command": "/path/to/redc",
      "args": ["mcp", "stdio"]
    }
  }
}
```

è¯¦ç»†æ–‡æ¡£è¯·å‚é˜… **[MCP_CN.md](doc/MCP_CN.md)**ã€‚

---

## ç¼–æ’æœåŠ¡ Compose

redc æä¾›äº†ä¸€ä¸ªç¼–æ’æœåŠ¡ï¼Œå¯ä»¥é€šè¿‡ YAML é…ç½®æ–‡ä»¶åŒæ—¶ç®¡ç†å¤šä¸ªäº‘æœåŠ¡å®ä¾‹ï¼Œå®ç°å¤æ‚çš„åŸºç¡€è®¾æ–½éƒ¨ç½²ã€‚

### å¿«é€Ÿå¼€å§‹

**é…ç½®æ–‡ä»¶ç¤ºä¾‹** ([å®Œæ•´ç¤ºä¾‹](doc/redc-compose.yaml))

```yaml
version: "3.9"

# æœåŠ¡å®šä¹‰
services:
  # é˜¿é‡Œäº‘ ECS å®ä¾‹
  aliyun_server:
    image: aliyun/ecs
    container_name: my_aliyun_ecs
    command: |
      echo "é˜¿é‡Œäº‘ ECS åˆå§‹åŒ–å®Œæˆ"
      uptime
  
  # ç«å±±äº‘ ECS å®ä¾‹
  volcengine_server:
    image: volcengine/ecs
    container_name: my_volcengine_ecs
    command: |
      echo "ç«å±±äº‘ ECS åˆå§‹åŒ–å®Œæˆ"
      uptime

# åç½®ç¼–æ’ä»»åŠ¡
setup:
  - name: "æ£€æŸ¥é˜¿é‡Œäº‘å®ä¾‹"
    service: aliyun_server
    command: hostname && ip addr show

  - name: "æ£€æŸ¥ç«å±±äº‘å®ä¾‹"
    service: volcengine_server
    command: hostname && ip addr show
```

**å¸¸ç”¨å‘½ä»¤**

```bash
# é¢„è§ˆé…ç½®
redc compose config redc-compose.yaml

# å¯åŠ¨ç¼–æ’æœåŠ¡
redc compose up redc-compose.yaml

# å…³é—­ç¼–æ’æœåŠ¡
redc compose down redc-compose.yaml
```

**è¯¦ç»†æ–‡æ¡£**

å®Œæ•´çš„ä½¿ç”¨è¯´æ˜ã€é«˜çº§åŠŸèƒ½å’Œæœ€ä½³å®è·µ,è¯·å‚é˜… **[Compose ç¼–æ’æŒ‡å—](doc/Compose_CN.md)**ã€‚

---

## é…ç½®ç¼“å­˜å’ŒåŠ é€Ÿ

ä»…é…ç½®ç¼“å­˜åœ°å€ï¼š

```bash
echo 'plugin_cache_dir = "$HOME/.terraform.d/plugin-cache"' > ~/.terraformrc
```

é…ç½®é˜¿é‡Œäº‘åŠ é€Ÿ ä¿®æ”¹ `/.terraformrc` æ–‡ä»¶

```
plugin_cache_dir  = "$HOME/.terraform.d/plugin-cache"
disable_checkpoint = true
provider_installation {
  network_mirror {
    url = "https://mirrors.aliyun.com/terraform/"
    # é™åˆ¶åªæœ‰é˜¿é‡Œäº‘ç›¸å…³ Provider ä»å›½å†…é•œåƒæºä¸‹è½½
    include = ["registry.terraform.io/aliyun/alicloud",
               "registry.terraform.io/hashicorp/alicloud",
              ]
  }
  direct {
    # å£°æ˜é™¤äº†é˜¿é‡Œäº‘ç›¸å…³Provider, å…¶å®ƒProviderä¿æŒåŸæœ‰çš„ä¸‹è½½é“¾è·¯
    exclude = ["registry.terraform.io/aliyun/alicloud",
               "registry.terraform.io/hashicorp/alicloud",
              ]
  }
}
```

---

## è®¾è®¡è§„åˆ’

1. å…ˆåˆ›å»ºæ–°é¡¹ç›®
2. æŒ‡å®šé¡¹ç›®ä¸‹è¦åˆ›å»ºåœºæ™¯ä¼šä»åœºæ™¯åº“å¤åˆ¶ä¸€ä»½åœºæ™¯æ–‡ä»¶å¤¹åˆ°é¡¹ç›®æ–‡ä»¶å¤¹ä¸‹
3. ä¸åŒé¡¹ç›®ä¸‹åˆ›å»ºåŒä¸€åœºæ™¯äº’ä¸å¹²æ‰°
4. åŒä¸€é¡¹ç›®ä¸‹åˆ›å»ºåŒä¸€åœºæ™¯äº’ä¸å¹²æ‰°
5. å¤šç”¨æˆ·æ“ä½œäº’ä¸å¹²æ‰°(æœ¬åœ°æœ‰åšé‰´æƒ,ä½†è¿™ä¸ªå®é™…ä¸Šè¦åœ¨å¹³å°ä¸Šå»åš)

- redc é…ç½®æ–‡ä»¶ (~/redc/config.yaml)
- é¡¹ç›®1 (./project1)
    - åœºæ™¯1 (./project1/[uuid1])
        - main.tf
        - version.tf
        - output.tf
    - åœºæ™¯2 (./project1/[uuid2])
        - main.tf
        - version.tf
        - output.tf
    - é¡¹ç›®çŠ¶æ€æ–‡ä»¶ (project.ini)
- é¡¹ç›®2 (./project2)
    - åœºæ™¯1 (./project2/[uuid1])
        - main.tf
        - version.tf
        - output.tf
    - åœºæ™¯2 (./project2/[uuid2])
        - ...
    - é¡¹ç›®çŠ¶æ€æ–‡ä»¶ (project.ini)
- é¡¹ç›®3 (./project3)
    - ...

## æ–‡ç« ä»‹ç»

- https://mp.weixin.qq.com/s/JH-IlL_GFgZp3xXeOFzZeQ
